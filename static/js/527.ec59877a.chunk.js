"use strict";(self.webpackChunktodo_woman_up=self.webpackChunktodo_woman_up||[]).push([[527],{8527:function(e,a,t){t.r(a),t.d(a,{default:function(){return N}});var r=t(885),n=t(2791),s=t(1413),i=t(6881),l=t(5983),d=t(184),c=function(e){var a=e.isEditable,t=e.updateHandler,r=e.removeHandler,n=e.styles;return(0,d.jsx)(d.Fragment,{children:a?(0,d.jsx)("i",{onClick:function(){return t(!1)},className:n.agree_text_change+" fa-solid fa-check-to-slot"}):(0,d.jsx)("i",{onClick:r,className:n.remove_task+" fa-regular fa-trash-can"})})},u={task_card:"TaskCard_task_card__xk7C2",card_header:"TaskCard_card_header__np188",attached_files:"TaskCard_attached_files__xxYZy",file_count:"TaskCard_file_count__6sH5Q",file_input_options:"TaskCard_file_input_options__fREw6",card_text:"TaskCard_card_text__28p0T",card_readers:"TaskCard_card_readers__Kwy4p",card_deadline:"TaskCard_card_deadline__Q6me1",failed:"TaskCard_failed__8dVby",agree_text_change:"TaskCard_agree_text_change__9vP+Z",remove_task:"TaskCard_remove_task__i5gNB",input__hidden:"TaskCard_input__hidden__O-ACi",grabbing:"TaskCard_grabbing__tFCmv"},o=function(e){var a=e.styles,t=e.date,r=e.isEditable,s=e.handler,i=n.useRef(null),l=new Date(t).getTime();return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("span",{onClick:function(){var e;return null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.showPicker()},className:"".concat(a.card_deadline," ").concat(l<(new Date).getTime()&&t?a.failed:""),children:["".concat(t," "),r&&(0,d.jsx)("i",{className:"fa-regular fa-calendar",children:(0,d.jsx)("input",{ref:i,type:"date",className:a.input__hidden,onChange:function(e){return s(e.target.value)}})})]})})},_=function(e){var a=e.isEditable,t=e.text,r=e.styles,n=e.handler,s=e.updateHandler;return(0,d.jsx)(d.Fragment,{children:a?(0,d.jsx)("textarea",{"aria-label":"input",readOnly:!a,className:r.card_text,onKeyDown:function(e){return e.ctrlKey&&"Enter"===e.code&&s(!1)},onChange:function(e){return n(e.target.value)},value:t}):(0,d.jsx)("p",{className:r.card_text,children:t})})},f=function(e){var a=e.styles,t=e.fileNames,r=e.refElem,n=e.uploadHandler,s=e.downloadHandler,i=e.menuToggler,l=e.showMenu;return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("i",{className:a.attached_files+" fa-solid fa-paperclip",onClick:i,children:[!!t.length&&(0,d.jsx)("span",{className:a.file_count,children:t.length}),(0,d.jsx)("input",{type:"file",className:a.input__hidden,onChange:n,multiple:!0,ref:r}),l&&(0,d.jsxs)("div",{className:a.file_input_options,children:[(0,d.jsx)("p",{onClick:s,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"}),(0,d.jsx)("p",{onClick:function(){var e;i(),null===(e=r.current)||void 0===e||e.click()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})})},v=function(e){var a=e.isEditable,t=e.text,r=e.styles,n=e.handler;return(0,d.jsx)(d.Fragment,{children:a?(0,d.jsx)("input",{"aria-label":"input",className:r.card_header,readOnly:!a,onChange:function(e){return n(e.target.value)},value:t}):(0,d.jsx)("h5",{className:r.card_header,children:t})})},h=function(e){var a=e.taskData,t=a.taskID,h=a.text,p=a.header,m=a.editable,x=a.deadline,k=a.readers,C=a.isCurrent,g=a.isFuture,j=a.isCompleted,b=a.files,w=e.droppedGroup,N=(0,i.T)(),D=n.useState(m),T=(0,r.Z)(D,2),y=T[0],E=T[1],O={taskID:t,text:h,header:p,editable:m,deadline:x,readers:k,isCurrent:C,isFuture:g,isCompleted:j,files:b},Z=n.useState(p),S=(0,r.Z)(Z,2),H=S[0],I=S[1],F=n.useState(h),L=(0,r.Z)(F,2),G=L[0],P=L[1],K=n.useState(x),A=(0,r.Z)(K,2),R=A[0],V=A[1],J=n.useState(!1),M=(0,r.Z)(J,2),Q=M[0],Y=M[1],B=n.useRef(null),U=n.useRef(null),W=(0,s.Z)((0,s.Z)({},O),{},{header:H,text:G,editable:!1,deadline:R,isCurrent:C,isFuture:g,isCompleted:j});n.useEffect((function(){var e=function(e){B.current&&!e.composedPath().includes(B.current)&&Y(!1)};return document.addEventListener("click",(function(a){return e(a)})),document.removeEventListener("click",(function(a){return e(a)}))}),[]);var z=function(e){e?E(e):(E(!1),N((0,l.OV)(W)),N((0,l.xJ)(W)))};return(0,d.jsxs)("div",{ref:B,className:u.task_card,onDoubleClick:function(){return z(!0)},onDragStart:function(e){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move"},onDragEnd:function(){N((0,l.LI)([t,w])),N((0,l.xJ)((0,s.Z)((0,s.Z)({},W),{},{isCurrent:"current"===w,isFuture:"future"===w,isCompleted:"completed"===w})))},onKeyDown:function(e){return"Escape"===e.code&&E(!1)},draggable:!y,children:[(0,d.jsx)(v,{isEditable:y,text:H,styles:u,handler:I}),(0,d.jsx)(f,{styles:u,fileNames:b,refElem:U,uploadHandler:function(){var e;null!==(e=U.current)&&void 0!==e&&e.files&&N((0,l.Uh)({files:U.current.files,taskID:t}))},downloadHandler:function(){b.length&&N((0,l.tR)(t))},menuToggler:function(){return Y((function(e){return!e}))},showMenu:Q}),(0,d.jsx)(_,{isEditable:y,text:G,styles:u,handler:P,updateHandler:z}),(0,d.jsx)("div",{className:u.card_readers}),(0,d.jsx)(o,{styles:u,date:null!==R&&void 0!==R?R:"\u0411\u0435\u0441\u0441\u0440\u043e\u0447\u043d\u043e",isEditable:y,handler:V}),(0,d.jsx)(c,{isEditable:y,updateHandler:z,removeHandler:function(){N((0,l.yJ)(t)),N((0,l.yT)({taskID:t,files:b}))},styles:u})]})},p="Overview_overview__K7tBb",m="Overview_loading_wrapper__d5eX3",x="Overview_loading_message__1PSIt",k="Overview_current_tasks_block__S7VCQ",C="Overview_future_tasks_block__bGowr",g="Overview_completed_tasks_block__aVwWM",j="Overview_tasks_block_header__cON1b",b="Overview_add_task_button__jHDcm",w="Overview_dots_bars__VZTzo",N=function(){var e=(0,i.T)(),a=(0,i.C)(l.KC),t=a.taskList,s=a.status,c=(0,i.C)((function(e){return e.searchSlice})).input,u=n.useState(),o=(0,r.Z)(u,2),_=o[0],f=o[1];n.useEffect((function(){s===l.YG.ADDED&&e((0,l.Pb)(t[t.length-1]))}),[s]);var v=function(a){s!==l.YG.WAITING&&s!==l.OP.SUCCESS||e((0,l.Zk)(a))};return s===l.OP.LOADING?(0,d.jsx)("section",{className:p,children:(0,d.jsxs)("div",{className:m,children:[(0,d.jsx)("div",{className:w}),(0,d.jsx)("span",{className:x,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u0434\u0430\u0447"})]})}):(0,d.jsxs)("section",{className:p,children:[(0,d.jsxs)("div",{className:k,onDragOverCapture:function(e){e.preventDefault(),f("current")},children:[(0,d.jsx)("h4",{className:j,children:"\u0422\u0435\u043a\u0443\u0449\u0438\u0435"}),(0,d.jsx)("button",{className:b,onClick:function(){return v("current")},children:"+"}),t.filter((function(e){return e.header.toLowerCase().includes(null===c||void 0===c?void 0:c.toLowerCase())})).map((function(e){return e.isCurrent?(0,d.jsx)(h,{taskData:e,droppedGroup:_},e.taskID):null})).reverse()]}),(0,d.jsxs)("div",{className:C,onDragOverCapture:function(e){e.preventDefault(),f("future")},children:[(0,d.jsx)("h4",{className:j,children:"\u0412 \u043e\u0447\u0435\u0440\u0435\u0434\u0438"}),(0,d.jsx)("button",{className:b,onClick:function(){return v("future")},children:"+"}),t.filter((function(e){return e.header.toLowerCase().includes(null===c||void 0===c?void 0:c.toLowerCase())})).map((function(e){return e.isFuture?(0,d.jsx)(h,{taskData:e,droppedGroup:_},e.taskID):null})).reverse()]}),(0,d.jsxs)("div",{className:g,onDragOverCapture:function(e){e.preventDefault(),f("completed")},children:[(0,d.jsx)("h4",{className:j,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435"}),(0,d.jsx)("button",{className:b,onClick:function(){return v("completed")},children:"+"}),t.filter((function(e){return e.header.toLowerCase().includes(null===c||void 0===c?void 0:c.toLowerCase())})).map((function(e){return e.isCompleted?(0,d.jsx)(h,{taskData:e,droppedGroup:_},e.taskID):null})).reverse()]})]})}}}]);
//# sourceMappingURL=527.ec59877a.chunk.js.map